<?php
session_start();
include("postcategory.php");
error_reporting(0);




if (isset($_GET['editsave'])){

	$id = $_GET['editid'];
	$name= $_GET['Edit'];
    $query="UPDATE category SET categoryName= '$name' WHERE CategoryID = '$id'";
    $result= mysqli_query($conn, $query);
    header('Location :postcategory.php');
}
 ?>

<?php
//$conn=mysqli_connect('localhost','root','','lostfounddb');
//
//
//if(isset($_POST['update']))
//{
//  $id = $_POST['id'];
//  $Update_Description = $_POST['Description'];
//  $Update_Date = $_POST['Date'];
//  
//  $query = "UPDATE item SET Description='$Update_Description', Date='$Update_Date' WHERE ItemID='$id'  ";
//  $query_run = mysqli_query($conn, $query);
//  if($query_run)
//  {
//    header("location: lostList.php");
//   
//  }
//}
?>

<?php
$conn=mysqli_connect('localhost','root','','lostfounddb');

if (isset($_POST['submit'])) {

  $id=$_GET['id'];  
    $Update_Description = $_POST['description'];
    $Update_Date = $_POST['date'];
    
    $update="UPDATE item SET Description='$Update_Description', Date='$Update_Date' WHERE ItemID='$id'  ";
  
  if (mysqli_query($conn,$update)) {
    header("location: lostList.php");   
  }

      // code.. 
}

$query="SELECT Date,Description,ItemID FROM item WHERE ItemID='" . $_GET['id'] . "'";
$result = mysqli_query($conn,$query);
$row= mysqli_fetch_assoc($result);
?>
<!DOCTYPE html>
<html>
<head>
  <title>Update Data</title>
  <link rel="stylesheet" href="dist/css/adminlte.min.css">
  <link href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css">
  <link rel="stylesheet" href="plugins/fontawesome-free/css/all.min.css">
  <!-- DataTables -->
  <link rel="stylesheet" href="plugins/datatables-bs4/css/dataTables.bootstrap4.min.css">
  <link rel="stylesheet" href="plugins/datatables-responsive/css/responsive.bootstrap4.min.css">
  <link rel="stylesheet" href="plugins/datatables-buttons/css/buttons.bootstrap4.min.css">
  <!-- Theme style -->
     <link rel="stylesheet" href="style.css">

   

</head>
<body>
  
  <form  method="post" action="">
    <div class="modal-content">
          <div class="modal-header">
            <h4 class="modal-title">Update</h4>
            
            </button>
          </div>
          <div class="card card-primary">
              <div class="card-body">
                <div class="form-group">
                  <label >Description :</label><br>
                  <input type="hidden" name="item_id">
                  <textarea class="form-control " rows="3" name="description" required ><?php echo $row['Description']; ?></textarea>
                </div>
                <div class="form-group">
                  <label >Date:</label><br>
                  <input type="date" class="form-control" name="date" value="<?php echo $row['Date']; ?>" required>
                </div>   
        
          <div class="modal-footer justify-content-between">
                <a href="lostList.php" class="btn btn-danger" data-dismiss="modal"><i class="fa fa-times"></i> Close</a>
                <button  name="submit" class="btn btn-primary"><i class="fa fa-check"></i> Submit</button>
          </div>

        </div>
      </div>
    </div>
    </form>






    <script src="plugins/jquery/jquery.min.js"></script>
<!-- Bootstrap 4 -->
<script src="plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
<!-- DataTables  & Plugins -->
<script src="plugins/datatables/jquery.dataTables.min.js"></script>
<script src="plugins/datatables-bs4/js/dataTables.bootstrap4.min.js"></script>
<script src="plugins/datatables-responsive/js/dataTables.responsive.min.js"></script>
<script src="plugins/datatables-responsive/js/responsive.bootstrap4.min.js"></script>
<script src="plugins/datatables-buttons/js/dataTables.buttons.min.js"></script>
<script src="plugins/datatables-buttons/js/buttons.bootstrap4.min.js"></script>
<script src="plugins/jszip/jszip.min.js"></script>
<script src="plugins/pdfmake/pdfmake.min.js"></script>
<script src="plugins/pdfmake/vfs_fonts.js"></script>
<script src="plugins/datatables-buttons/js/buttons.html5.min.js"></script>
<script src="plugins/datatables-buttons/js/buttons.print.min.js"></script>
<script src="plugins/datatables-buttons/js/buttons.colVis.min.js"></script>
<!-- AdminLTE App -->
<script src="dist/js/adminlte.min.js"></script>
<!-- AdminLTE for demo purposes -->
<script src="dist/js/demo.js"></script>
<!-- Page specific script -->

<script>
  
  $(function () {
    $("#example1").DataTable({
      "responsive": true, "lengthChange": false, "autoWidth": false,
      "buttons": [""]
    }).buttons().container().appendTo('#example1_wrapper .col-md-6:eq(0)');
    $('#example2').DataTable({
      "paging": true,
      "lengthChange": false,
      "searching": false,
      "ordering": true,
      "info": true,
      "autoWidth": false,
      "responsive": true,
    });
  });
</script>
</body>
</html>




<?php
//$conn=mysqli_connect('localhost','root','','lostfounddb');
//
//
//if(isset($_POST['update']))
//{
//  $id = $_POST['id'];
//  $Update_Description = $_POST['Description'];
//  $Update_Date = $_POST['Date'];
//  
//  $query = "UPDATE item SET Description='$Update_Description', Date='$Update_Date' WHERE ItemID='$id'  ";
//  $query_run = mysqli_query($conn, $query);
//  if($query_run)
//  {
//    header("location: foundList.php");
//   
//  }
//}
?>

<?php
$conn=mysqli_connect('localhost','root','','lostfounddb');

if (isset($_POST['submit'])) {

  $id=$_GET['id'];  
    $Update_Description = $_POST['description'];
    $Update_Date = $_POST['date'];
    
    $update="UPDATE item SET Description='$Update_Description', Date='$Update_Date' WHERE ItemID='$id'  ";
  
  if (mysqli_query($conn,$update)) {
    header("location: foundList.php");   
  }

      // code.. 
}

$query="SELECT Date,Description,ItemID FROM item WHERE ItemID='" . $_GET['id'] . "'";
$result = mysqli_query($conn,$query);
$row= mysqli_fetch_assoc($result);
?>
<!DOCTYPE html>
<html>
<head>
  <title>Update Data</title>
  <link rel="stylesheet" href="dist/css/adminlte.min.css">
  <link href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css">
  <link rel="stylesheet" href="plugins/fontawesome-free/css/all.min.css">
  <!-- DataTables -->
  <link rel="stylesheet" href="plugins/datatables-bs4/css/dataTables.bootstrap4.min.css">
  <link rel="stylesheet" href="plugins/datatables-responsive/css/responsive.bootstrap4.min.css">
  <link rel="stylesheet" href="plugins/datatables-buttons/css/buttons.bootstrap4.min.css">
  <!-- Theme style -->
     <link rel="stylesheet" href="style.css">

   

</head>
<body>
  
  <form  method="post" action="">
    <div class="modal-content">
          <div class="modal-header">
            <h4 class="modal-title">Update</h4>
            
            </button>
          </div>
          <div class="card card-primary">
              <div class="card-body">
                <div class="form-group">
                  <label >Description :</label><br>
                  <input type="hidden" name="item_id">
                  <textarea class="form-control " rows="3" name="description" required ><?php echo $row['Description']; ?></textarea>
                </div>
                <div class="form-group">
                  <label >Date:</label><br>
                  <input type="date" class="form-control" name="date" value="<?php echo $row['Date']; ?>" required>
                </div>   
        
          <div class="modal-footer justify-content-between">
                <a href="foundList.php" class="btn btn-danger" data-dismiss="modal"><i class="fa fa-times"></i> Close</a>
                <button  name="submit" class="btn btn-primary"><i class="fa fa-check"></i> Submit</button>
          </div>

        </div>
      </div>
    </div>
    </form>






    <script src="plugins/jquery/jquery.min.js"></script>
<!-- Bootstrap 4 -->
<script src="plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
<!-- DataTables  & Plugins -->
<script src="plugins/datatables/jquery.dataTables.min.js"></script>
<script src="plugins/datatables-bs4/js/dataTables.bootstrap4.min.js"></script>
<script src="plugins/datatables-responsive/js/dataTables.responsive.min.js"></script>
<script src="plugins/datatables-responsive/js/responsive.bootstrap4.min.js"></script>
<script src="plugins/datatables-buttons/js/dataTables.buttons.min.js"></script>
<script src="plugins/datatables-buttons/js/buttons.bootstrap4.min.js"></script>
<script src="plugins/jszip/jszip.min.js"></script>
<script src="plugins/pdfmake/pdfmake.min.js"></script>
<script src="plugins/pdfmake/vfs_fonts.js"></script>
<script src="plugins/datatables-buttons/js/buttons.html5.min.js"></script>
<script src="plugins/datatables-buttons/js/buttons.print.min.js"></script>
<script src="plugins/datatables-buttons/js/buttons.colVis.min.js"></script>
<!-- AdminLTE App -->
<script src="dist/js/adminlte.min.js"></script>
<!-- AdminLTE for demo purposes -->
<script src="dist/js/demo.js"></script>
<!-- Page specific script -->

<script>
  
  $(function () {
    $("#example1").DataTable({
      "responsive": true, "lengthChange": false, "autoWidth": false,
      "buttons": [""]
    }).buttons().container().appendTo('#example1_wrapper .col-md-6:eq(0)');
    $('#example2').DataTable({
      "paging": true,
      "lengthChange": false,
      "searching": false,
      "ordering": true,
      "info": true,
      "autoWidth": false,
      "responsive": true,
    });
  });
</script>
</body>
</html>






<?php
//$conn=mysqli_connect('localhost','root','','lostfounddb');
//
//
//if(isset($_POST['update']))
//{
//  $id = $_POST['id'];
//  $Update_Name = $_POST['Edit'];
//  
//  
//  $query = "UPDATE category SET categoryName='$Update_Name' WHERE CategoryID='$id' ";
//  $query_run = mysqli_query($conn, $query);
//  if($query_run)
//  {
//    header("location: postcategory.php");
//   
//  }
//}
?>

<?php
$conn=mysqli_connect('localhost','root','','lostfounddb');

if (isset($_POST['updateID'])) {

  $id=$_GET['id'];  
     $id_cat = $_POST['id2'];
    $Update_Name = $_POST['name'];
    
    $update="UPDATE category SET categoryName='$Update_Name' WHERE CategoryID='$id' ";
  
  if (mysqli_query($conn,$update)) {
    header("location: postcategory.php");   
  }

      // code.. 
}

$query="SELECT CategoryName FROM category WHERE CategoryID='" . $_GET['id'] . "'";
$result = mysqli_query($conn,$query);
$row= mysqli_fetch_assoc($result);
?>
<!DOCTYPE html>
<html>
<head>
  <title>Update Data</title>
  <link rel="stylesheet" href="dist/css/adminlte.min.css">
  <link href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css">
  <link rel="stylesheet" href="plugins/fontawesome-free/css/all.min.css">
  <!-- DataTables -->
  <link rel="stylesheet" href="plugins/datatables-bs4/css/dataTables.bootstrap4.min.css">
  <link rel="stylesheet" href="plugins/datatables-responsive/css/responsive.bootstrap4.min.css">
  <link rel="stylesheet" href="plugins/datatables-buttons/css/buttons.bootstrap4.min.css">
  <!-- Theme style -->
     <link rel="stylesheet" href="style.css">

   

</head>
<body>
  
  <form  method="post" action="">
    <div class="modal-content">
          <div class="modal-header">
            <h4 class="modal-title">Update</h4>
            
            </button>
          </div>
          <div class="card card-primary">
              <div class="card-body">
                
                <div class="form-group">
                  <label >Category Name:</label><br>
                  <input type="hidden" name="id2">
                  <input type="text" class="form-control" name="name" value="<?php echo $row['CategoryName']; ?>" required>
                </div>   
        
          <div class="modal-footer justify-content-between">
                <a href="postcategory.php" class="btn btn-danger" data-dismiss="modal"><i class="fa fa-times"></i> Close</a>
                <button  name="updateID" class="btn btn-primary"><i class="fa fa-check"></i> Submit</button>
          </div>

        </div>
      </div>
    </div>
    </form>






    <script src="plugins/jquery/jquery.min.js"></script>
<!-- Bootstrap 4 -->
<script src="plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
<!-- DataTables  & Plugins -->
<script src="plugins/datatables/jquery.dataTables.min.js"></script>
<script src="plugins/datatables-bs4/js/dataTables.bootstrap4.min.js"></script>
<script src="plugins/datatables-responsive/js/dataTables.responsive.min.js"></script>
<script src="plugins/datatables-responsive/js/responsive.bootstrap4.min.js"></script>
<script src="plugins/datatables-buttons/js/dataTables.buttons.min.js"></script>
<script src="plugins/datatables-buttons/js/buttons.bootstrap4.min.js"></script>
<script src="plugins/jszip/jszip.min.js"></script>
<script src="plugins/pdfmake/pdfmake.min.js"></script>
<script src="plugins/pdfmake/vfs_fonts.js"></script>
<script src="plugins/datatables-buttons/js/buttons.html5.min.js"></script>
<script src="plugins/datatables-buttons/js/buttons.print.min.js"></script>
<script src="plugins/datatables-buttons/js/buttons.colVis.min.js"></script>
<!-- AdminLTE App -->
<script src="dist/js/adminlte.min.js"></script>
<!-- AdminLTE for demo purposes -->
<script src="dist/js/demo.js"></script>
<!-- Page specific script -->

<script>
  
  $(function () {
    $("#example1").DataTable({
      "responsive": true, "lengthChange": false, "autoWidth": false,
      "buttons": [""]
    }).buttons().container().appendTo('#example1_wrapper .col-md-6:eq(0)');
    $('#example2').DataTable({
      "paging": true,
      "lengthChange": false,
      "searching": false,
      "ordering": true,
      "info": true,
      "autoWidth": false,
      "responsive": true,
    });
  });
</script>
</body>
</html>





<!DOCTYPE html>
<html lang="en">
<head>
    
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Lost and Found System </title>


  <!-- Google Font: Source Sans Pro -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="plugins/fontawesome-free/css/all.min.css">
  <!-- DataTables -->
  <link rel="stylesheet" href="plugins/datatables-bs4/css/dataTables.bootstrap4.min.css">
  <link rel="stylesheet" href="plugins/datatables-responsive/css/responsive.bootstrap4.min.css">
  <link rel="stylesheet" href="plugins/datatables-buttons/css/buttons.bootstrap4.min.css">
  <!-- Theme style -->
  <link rel="stylesheet" href="dist/css/adminlte.min.css">
<!--<script type="text/javascript" src="http://gc.kis.v2.scr.kaspersky-labs.com/FD126C42-EBFA-4E12-B309-BB3FDD723AC1/main.js?attr=-7eSns8llm-RMrRDsxHMEIf7RLOedtIl6ZakLhKnAVIi-rbZhzluH4rAXuSX_8wNGEWusUgzMC9IkFMaNASdxErVoYrB2Z8hTL1irKOppalmPhXlsdexC0odXcoEnuLC" charset="UTF-8"></script>-->
</head>






<body class="hold-transition sidebar-mini">
<div class="wrapper">
  <!-- Navbar -->
 <nav class="main-header navbar navbar-expand navbar-white navbar-light">
    <!-- Left navbar links -->
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link" data-widget="pushmenu" href="#" role="button"><i class="fas fa-bars"></i></a>
      </li>
    
    </ul>

    <!-- Right navbar links -->
    <ul class="navbar-nav ml-auto">
      <!-- Messages Dropdown Menu -->
      
      <!-- Notifications Dropdown Menu -->

      <li class="nav-item">
        <a class="nav-link" data-widget="fullscreen" href="#" role="button">
          <i class="fas fa-expand-arrows-alt"></i>
        </a>
      </li>
     
    </ul>
  </nav>
 <aside class="main-sidebar sidebar-dark-primary elevation-4" style="background: #156C34;">
    <!-- Brand Logo -->
    <a href="" class="brand-link">
      <img src="logo.png" alt="AdminLTE Logo" class="brand-image img-circle elevation-3" style="opacity: .8">
      <span class="brand-text font-weight-light">Lost and Found</span>
    </a>

    <!-- Sidebar -->
    <div class="sidebar">
      <!-- Sidebar user panel (optional) -->
 

      <!-- Sidebar Menu -->
      <nav class="mt-2">
        <ul class="nav nav-pills nav-sidebar flex-column" data-widget="treeview" role="menu" data-accordion="false">
          <!-- Add icons to the links using the .nav-icon class
               with font-awesome or any other icon font library -->
          <li class="nav-item menu-open">
            <a href="index.php" class="nav-link ">
              <i class="nav-icon fas fa-tachometer-alt"></i>
              <p>
                Dashboard
              </p>
            </a>
          </li>
          <li class="nav-item">
            <a href="lostList.php" class="nav-link">
              <i class="nav-icon fas fa-list-alt"></i>
              <p>
               Lost Item
              </p>
            </a>
          </li>
          <li class="nav-item">
            <a href="foundList.php" class="nav-link">
              <i class="nav-icon fas fa-list-alt"></i>
              <p>
               Found Item
              </p>
            </a>
          </li>
          <li class="nav-item">
            <a href="postcategory.php" class="nav-link active" style="background: #17a2b8;">
              <i class="nav-icon fas fa-list"></i>
              <p>
                Category
              </p>
            </a>
          </li>          
          <li class="nav-item">
            <a href="Request.php" class="nav-link">
              <i class="nav-icon fas fa-users-cog"></i>
              <p>
                Requests        
              </p>
            </a>
          </li>
          <li class="nav-item">
            <a href="logout.php" class="nav-link">
              <i class="nav-icon fas fa-power-off"></i>
              <p>
                Logout
              </p>
            </a>
          </li>

        </ul>
      </nav>
      <!-- /.sidebar-menu -->
    </div>
    <!-- /.sidebar -->
  </aside>

  <!-- Content Wrapper. Contains page content -->
  <div class="content-wrapper">
    <!-- Content Header (Page header) -->
    <section class="content-header">
      <div class="container-fluid">
        <div class="row mb-2">
          <div class="col-sm-6">
            <h1>Post Category</h1>
          </div>
          <div class="col-sm-6">
            <ol class="breadcrumb float-sm-right">
              <li class="breadcrumb-item"><a href="index.php">Home</a></li>
              <li class="breadcrumb-item active">Post Category</li>
            </ol>
          </div>
        </div>
      </div><!-- /.container-fluid -->
    </section>

      <!-- Main content -->
    <section class="content">
      <div class="container-fluid">
        <div class="row">
          <div class="col-12">
            <div class="card">
              <div class="card-header">

                 <form action="" method="GET"> 
                  <div class="col-md-12">
              <div class="input-group mb-1">
                 <h3 class="card-title"> Category Data table</h3> 
                 <div class="col-sm-12 col-md-5"></div>
              <input type="text" name ="search" value="<?php if(isset($_GET['search'])){echo $_GET['search']; } ?>" class="form-control" placeholder="Search by category name ..">
                 <button type="submit" class="btn btn-info btn-xs" style="font-size:17px;">Search</button>
              </div>
              </div>
 

              </form>



                
            

<?php 
                    //$host = 'localhost';// Username for database
                    //$username  = 'root';// username come with xampp
                    //$password = '';
                    //$database = 'lostfounddb'; // database you made 
//
                    ////create connection:
                    //$conn = mysqli_connect($host,$username,$password,$database);
                    //$query="SELECT * FROM category ";
                    //$result= mysqli_query($conn, $query);                 
               
  ?>




              <button class="btn btn-success btn-xs" style="margin-left: 94.5%;font-size:15px;" data-toggle="modal" data-target="#add"><i class="fa fa-plus"></i> Add</button>
              

                <div class="modal fade" id="add">
                        <div class="modal-dialog modal-sm">

                            <form action="" method="POST">
<?php 

 $host = 'localhost';// Username for database
 $username  = 'root';// username come with xampp
 $password = '';
 $database = 'lostfounddb'; // database you made 

 //create connection:
 $conn = mysqli_connect($host,$username,$password,$database);
if (isset($_POST['save'])){
  $name = $_POST['name'];
  

  $query="INSERT INTO category (CategoryName) VALUES('$name')";
  $result= mysqli_query($conn, $query);
}



?>

                          <div class="modal-content">
                            <div class="modal-header">
                              <h4 class="modal-title">Add Category</h4>
                              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                              </button>
                            </div>
                            <div class="card card-primary">
                              <div class="card-body">
                                <div class="form-group">
                                  <label for="exampleInputEmail1">Category Name</label>
                                  <input type="text" class="form-control" id="" name="name" placeholder="Enter Category Name ..">
                                </div>
                                </div>
                          </div>
                            <div class="modal-footer justify-content-between">
                              <button type="button" class="btn btn-danger" data-dismiss="modal"><i class="fa fa-times"></i> Close</button>
                              <button type="submit" class="btn btn-primary" name ="save"><i class="fa fa-check"></i> Submit</button>
                            </div>
                          </div>
                          </form>
                          <!-- /.modal-content -->
                        </div>
                        <!-- /.modal-dialog -->
                      </div>






<?php 
 $host = 'localhost';// Username for database
 $username  = 'root';// username come with xampp
 $password = '';
 $database = 'lostfounddb'; // database you made 

 //create connection:
 $conn = mysqli_connect($host,$username,$password,$database);
                     if (isset($_GET['deleteid'])){
                      $id= $_GET['deleteid'];
                      $query="DELETE FROM category WHERE CategoryID ='$id'";
                      $result= mysqli_query($conn, $query);}
?> 


<?php


 ?>




              </div>
              <!-- /.card-header -->
              <div class="card-body">
                



                <table id="example1" class="table table-bordered table-striped">
                  <thead>
                  <tr>
                    <th>Category ID</th>
                    <th>Category Name</th>
                    <th>Action</th>
                  </tr>
                  </thead>

                  <?php
                    $host = 'localhost';// Username for database
                    $username  = 'root';// username come with xampp
                    $password = '';
                    $database = 'lostfounddb'; // database you made 

                    //create connection:
                    $conn = mysqli_connect($host,$username,$password,$database);
                    if (isset($_GET['search']))
                    {
                      $text= $_GET['search'];
                       $query= "SELECT * FROM category WHERE CategoryName LIKE '%$text%' ";
                       $result= mysqli_query($conn, $query) ;

                    }
                    else{
                     $query=$sql="SELECT * FROM category ";
                                      
                                       
                     $result= mysqli_query($conn, $query);

                    }

                   if(mysqli_num_rows($result)>0){  
                      while ($row =mysqli_fetch_assoc($result)): ?>
                  
            
                  <tbody>
                  <tr>
                    <td><?php echo $row['CategoryID']; ?></td>
                    <td><?php echo $row['CategoryName']; ?></td>
  
                    <td class="text-center">
                  

                      
                  

                  <a class="btn btn-info btn-xs"  href="update2.php?id=<?php echo $row["CategoryID"];?>"><i class="fa fa-edit"></i> Edit</a>

                  <a class="btn btn-danger btn-xs" href="postcategory.php?deleteid=<?php echo $row['CategoryID'];?>" >
                    <i class="fa fa-times">  </i> Delete</a>

                    </td>
                    
                  </tr>
                  

                  </tbody>
                  
                 <?php
              endwhile; }else{ ?>   

                      <tr>
                    <td colspan="9" style="text-align: center; vertical-align: middle;" >No matching records found</td>

                  </tr>

<?php }?> 


<?php 
//$name='';
//if (isset($_GET['editid'])){
//  $id = $_GET['editid'];
//  
//
//  $query="SELECT * FROM category WHERE CategoryID= '$id'";
//  $result= mysqli_query($conn, $query);
//
//
//
//  if (count($result)==1){
//    $row =fetch_array($result);
//    $name= $row['Edit'];
//
//  }
//}
//


?>



                </table>
                     <div class="modal fade" id="edit">
                        <div class="modal-dialog modal-sm">
                          
                           <?php
                            
                            $sql="SELECT * FROM category";
                            $result2=mysqli_query($conn,$sql);


                          ?>




                            <form action="update2.php" method="POST">
                            <!--<input type="hidden" name = "id" value="<?php //echo $id;?>"> -->

                          <div class="modal-content">
                            <div class="modal-header">
                              <h4 class="modal-title">Update Category</h4>
                              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                              </button>
                            </div>
                            <div class="card card-primary">
                              <div class="card-body">
                                <div class="form-group">
                                  <select class="form-control" id="id" name="id" required>
                                  <option>Select category ID</option>
                                  <?php while ($row=mysqli_fetch_array($result2)) : ?>
                                  <option value="<?php echo $row['CategoryID'];?>"><?php echo $row['CategoryID'];?></option>
                                  <?php endwhile; ?>
                                  </select>
                                </div> 


                                <div class="form-group">
                                  <label for="exampleInputEmail1">Category</label>
                                  <input type="text" class="form-control" id="Edit" name="Edit"  placeholder="Enter Category Name ..">
                                </div>
                                
                              </div>
                          </div>
                            <div class="modal-footer justify-content-between">
                              <button type="button" class="btn btn-danger" data-dismiss="modal"><i class="fa fa-times"></i> Close</button>

                              <button  name="update" class="btn btn-primary"><i class="fa fa-check"></i> Submit</button>
                            </div>
                          </div>
                          </form>
                          <!-- /.modal-content -->
                        </div>
                        <!-- /.modal-dialog -->
                      </div>




              </div>
              <!-- /.card-body -->
            </div>
            <!-- /.card -->
          </div>
          <!-- /.col -->
        </div>
        <!-- /.row -->
      </div>
      <!-- /.container-fluid -->
    </section>
    <!-- /.content -->
  </div>
  <!-- /.content-wrapper -->
  <footer class="main-footer">
   <p class="u-text u-text-default u-text-1"> © Copyright&nbsp;2022.Lost and found team. &nbsp; &nbsp; Yarmouk university 
        </p>
        <p class="u-text u-text-default u-text-2"> </p>
    
    
    
  </footer>

  <!-- Control Sidebar -->
  <aside class="control-sidebar control-sidebar-dark">
    <!-- Control sidebar content goes here -->
  </aside>
  <!-- /.control-sidebar -->
</div>
<!-- ./wrapper -->

<!-- jQuery -->

<script src="plugins/jquery/jquery.min.js"></script>
<!-- Bootstrap 4 -->
<script src="plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
<!--DataTables  & Plugins -->
<!-- <script src="plugins/datatables/jquery.dataTables.min.js"></script>-->
<script src="plugins/datatables-bs4/js/dataTables.bootstrap4.min.js"></script>
<script src="plugins/datatables-responsive/js/dataTables.responsive.min.js"></script>
<script src="plugins/datatables-responsive/js/responsive.bootstrap4.min.js"></script>
<script src="plugins/datatables-buttons/js/dataTables.buttons.min.js"></script>
<script src="plugins/datatables-buttons/js/buttons.bootstrap4.min.js"></script>
<script src="plugins/jszip/jszip.min.js"></script>
<script src="plugins/pdfmake/pdfmake.min.js"></script>
<script src="plugins/pdfmake/vfs_fonts.js"></script>
<script src="plugins/datatables-buttons/js/buttons.html5.min.js"></script>
<script src="plugins/datatables-buttons/js/buttons.print.min.js"></script>
<script src="plugins/datatables-buttons/js/buttons.colVis.min.js"></script>
<!-- AdminLTE App -->
<script src="dist/js/adminlte.min.js"></script>
<!-- AdminLTE for demo purposes -->
<script src="dist/js/demo.js"></script>
<!-- Page specific script -->
<script>
  $(function () {
    $("#example1").DataTable({
      "responsive": true, "lengthChange": false, "autoWidth": false,
      "buttons": [""]
    }).buttons().container().appendTo('#example1_wrapper .col-md-6:eq(0)');
    $('#example2').DataTable({
      "paging": true,
      "lengthChange": false,
      "searching": false,
      "ordering": true,
      "info": true,
      "autoWidth": false,
      "responsive": true,
    });
  });
</script>
</body>
</html>


<?php
$conn=mysqli_connect('localhost','root','','lostfounddb');

if (isset($_POST['CategoryID']))
 {
	
	$id=$_POST['CategoryID'];
	$query="SELECT DISTINCT(ItemName) from  item  where CategoryID='$id' ";
	$do=mysqli_query($conn,$query);
	?>
	<select class="form-control item" name="ItemName">
		<option value="">Select item name </option>
	    <?php while ($row=mysqli_fetch_array($do)) : ?>
        <option value="<?php echo $row['ItemName'];?>"><?php echo $row['ItemName'];?></option>
       	<?php endwhile; ?>
	<?php

}


?>
<?php
$conn=mysqli_connect('localhost','root','','lostfounddb');

if (isset($_POST['CategoryID']))
 {
	
	$id=$_POST['CategoryID'];
	$query="SELECT DISTINCT(ItemName) from  item  where CategoryID='$id' ";
	$do=mysqli_query($conn,$query);
	?>
	<select class="form-control item" name="fItemName">
		<option value="">Select item name </option>
	    <?php while ($row=mysqli_fetch_array($do)) : ?>
        <option value="<?php echo $row['ItemName'];?>"><?php echo $row['ItemName'];?></option>
       	<?php endwhile; ?>
	<?php

}


?>
<?php
session_start();
?>
<?php
$username="root";
$database="lostfounddb";
$server="localhost";
$conn=mysqli_connect($server,$username,"",$database); 
$Cname=$_POST['name'];
$sql="select * from item  inner join category on item.CategoryID=category.CategoryID and CategoryName='$Cname' and approved=1";
$result=mysqli_query($conn,$sql);
 require('C:\xampp\htdocs\fpdf\fpdf.php');
$pdf = new FPDF('P','mm','A3'); 
$pdf->AddPage();

$width_cell=array(30,30,100,30,30,30);
$pdf->SetFont('Arial','B',12);

//Background color of header//
$pdf->SetFillColor(193,229,252);

// Header starts /// 
//First header column //
$pdf->Cell($width_cell[0],10,'ItemID',1,0,'C',true);
//Second header column//
$pdf->Cell($width_cell[1],10,'ItemName',1,0,'C',true);
//Third header column//
$pdf->Cell($width_cell[2],10,'Description',1,0,'C',true); 
//Fourth header column//
$pdf->Cell($width_cell[3],10,'Date',1,0,'C',true);
//Five header column//
$pdf->Cell($width_cell[4],10,'UserID',1,0,'C',true);
// six 5
$pdf->Cell($width_cell[5],10,'CategoryID',1,1,'C',true);
//// header ends ///////

$pdf->SetFont('Arial','',12);
//Background color of header//
$pdf->SetFillColor(235,236,236); 
//to give alternate background fill color to rows// 
$fill=false;



/// each record is one row  ///
foreach ($conn->query($sql) as $row) {
$pdf->Cell($width_cell[0],10,$row['ItemID'],1,0,'C',$fill);
$pdf->Cell($width_cell[1],10,$row['ItemName'],1,0,'L',$fill);
$pdf->Cell($width_cell[2],10,$row['Description'],1,0,'C',$fill);
$pdf->Cell($width_cell[3],10,$row['Date'],1,0,'C',$fill);
$pdf->Cell($width_cell[4],10,$row['UserID'],1,0,'C',$fill);
$pdf->Cell($width_cell[5],10,$row['CategoryID'],1,1,'C',$fill);
//to give alternate background fill  color to rows//
$fill = !$fill;
}
/// end of records /// 

$pdf->Output();
?>
<?php
session_start();
?>
<?php
$username="root";
$database="lostfounddb";
$server="localhost";
$conn=mysqli_connect($server,$username,"",$database); 
$StartDate=DATE($_POST['start']);
$EndDate=DATE($_POST['end']);


$sql="select * from item where Date between '$StartDate' and '$EndDate' and approved=1 ORDER BY Date ";
require('C:\xampp\htdocs\fpdf\fpdf.php');
$pdf = new FPDF('P','mm','A3'); 
$pdf->AddPage();

$width_cell=array(30,30,100,30,30,30);
$pdf->SetFont('Arial','B',12);

//Background color of header//
$pdf->SetFillColor(193,229,252);

// Header starts /// 
//First header column //
$pdf->Cell($width_cell[0],10,'ItemID',1,0,'C',true);
//Second header column//
$pdf->Cell($width_cell[1],10,'ItemName',1,0,'C',true);
//Third header column//
$pdf->Cell($width_cell[2],10,'Description',1,0,'C',true); 
//Fourth header column//
$pdf->Cell($width_cell[3],10,'Date',1,0,'C',true);
//Five header column//
$pdf->Cell($width_cell[4],10,'UserID',1,0,'C',true);
// six 5
$pdf->Cell($width_cell[5],10,'CategoryID',1,1,'C',true);
//// header ends ///////

$pdf->SetFont('Arial','',12);
//Background color of header//
$pdf->SetFillColor(235,236,236); 
//to give alternate background fill color to rows// 
$fill=false;


/// each record is one row  ///
foreach ($conn->query($sql) as $row) {
$pdf->Cell($width_cell[0],10,$row['ItemID'],1,0,'C',$fill);
$pdf->Cell($width_cell[1],10,$row['ItemName'],1,0,'L',$fill);
$pdf->Cell($width_cell[2],10,$row['Description'],1,0,'C',$fill);
$pdf->Cell($width_cell[3],10,$row['Date'],1,0,'C',$fill);
$pdf->Cell($width_cell[4],10,$row['UserID'],1,0,'C',$fill);
$pdf->Cell($width_cell[5],10,$row['CategoryID'],1,1,'C',$fill);
//to give alternate background fill  color to rows//
$fill = !$fill;
}
/// end of records /// 

$pdf->Output();
?>
<!DOCTYPE html>
<html lang="en">
<head>
    
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Lost and Found System </title>


<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">




  <!-- Google Font: Source Sans Pro -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="plugins/fontawesome-free/css/all.min.css">
  <!-- DataTables -->
  <link rel="stylesheet" href="plugins/datatables-bs4/css/dataTables.bootstrap4.min.css">
  <link rel="stylesheet" href="plugins/datatables-responsive/css/responsive.bootstrap4.min.css">
  <link rel="stylesheet" href="plugins/datatables-buttons/css/buttons.bootstrap4.min.css">
  <!-- Theme style -->
  <link rel="stylesheet" href="dist/css/adminlte.min.css">
<!--<script type="text/javascript" src="http://gc.kis.v2.scr.kaspersky-labs.com/FD126C42-EBFA-4E12-B309-BB3FDD723AC1/main.js?attr=-7eSns8llm-RMrRDsxHMEIf7RLOedtIl6ZakLhKnAVIi-rbZhzluH4rAXuSX_8wNGEWusUgzMC9IkFMaNASdxErVoYrB2Z8hTL1irKOppalmPhXlsdexC0odXcoEnuLC" charset="UTF-8"></script>--></head>







<body class="hold-transition sidebar-mini">
<div class="wrapper">
  
  <!-- Navbar -->
 <nav class="main-header navbar navbar-expand navbar-white navbar-light">
    <!-- Left navbar links -->
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link" data-widget="pushmenu" href="#" role="button"><i class="fas fa-bars"></i></a>
      </li>
    
    </ul>



    <!-- Right navbar links -->
    <ul class="navbar-nav ml-auto">
      <!-- Messages Dropdown Menu -->
      
      <!-- Notifications Dropdown Menu -->

      <li class="nav-item">
        <a class="nav-link" data-widget="fullscreen" href="#" role="button">
          <i class="fas fa-expand-arrows-alt"></i>
        </a>
      </li>
     
    </ul>
  </nav>
 <aside class="main-sidebar sidebar-dark-primary elevation-4" style="background: #156C34;">
    <!-- Brand Logo -->
    <a href="" class="brand-link">
      <img src="logo.png" alt="AdminLTE Logo" class="brand-image img-circle elevation-3" style="opacity: .8">
      <span class="brand-text font-weight-light">Lost and Found</span>
    </a>

    <!-- Sidebar -->
    <div class="sidebar">
      <!-- Sidebar user panel (optional) -->
 

      <!-- Sidebar Menu -->
      <nav class="mt-2">
        <ul class="nav nav-pills nav-sidebar flex-column" data-widget="treeview" role="menu" data-accordion="false">
          <!-- Add icons to the links using the .nav-icon class
               with font-awesome or any other icon font library -->
          <li class="nav-item menu-open">
            <a href="index.php" class="nav-link">
              <i class="nav-icon fas fa-tachometer-alt"></i>
              <p>
                Dashboard
              </p>
            </a>
          </li>
          <li class="nav-item">
            <a href="index.php" class="nav-link">
              <i class="nav-icon fas fa-list-alt"></i>
              <p>
               Lost  Item
              </p>
            </a>
          </li>
          <li class="nav-item">
            <a href="foundList.php" class="nav-link">
              <i class="nav-icon fas fa-list-alt"></i>
              <p>
               Found Item
              </p>
            </a>
          </li>
          <li class="nav-item">
            <a href="postcategory.php" class="nav-link">
              <i class="nav-icon fas fa-list"></i>
              <p>
                Category
              </p>
            </a>
          </li>          
          <li class="nav-item">
            <a href="usermanagement.php" class="nav-link active" style="background: #17a2b8;">
              <i class="nav-icon fas fa-users-cog"></i>
              <p>
                Requests        
              </p>
            </a>
          </li>
          <li class="nav-item">
            <a href="logout.php" class="nav-link">
              <i class="nav-icon fas fa-power-off"></i>
              <p>
                Logout
              </p>
            </a>
          </li>

        </ul>
      </nav>
      <!-- /.sidebar-menu -->
    </div>
    <!-- /.sidebar -->
  </aside>

  <!-- Content Wrapper. Contains page content -->
  <div class="content-wrapper">
    <!-- Content Header (Page header) -->
    <section class="content-header">
      <div class="container-fluid">
        <div class="row mb-2">
          <div class="col-sm-6">
            <h1>Requests</h1>
          </div>
          <div class="col-sm-6">
            <ol class="breadcrumb float-sm-right">
              <li class="breadcrumb-item"><a href="index.php">Home</a></li>
              <li class="breadcrumb-item active">Requests</li>
            </ol>
          </div>
        </div>
      </div><!-- /.container-fluid -->
    </section>



<?php 
                    $host = 'localhost';// Username for database
                    $username  = 'root';// username come with xampp
                    $password = '';
                    $database = 'lostfounddb'; // database you made 

                    //create connection:
                    $conn = mysqli_connect($host,$username,$password,$database);
                     if (isset($_GET['deleteid'])){
                      $id= $_GET['deleteid'];
                      $query="DELETE FROM item WHERE ItemID ='$id'";
                      $result= mysqli_query($conn, $query);

                     // $query1= "SELECT * from item where ItemID = '$id'";
                     // $result1= mysqli_query($conn, $query1);
                     // $row1 = mysqli_fetch_array($result1);
                      
                      //$query2= "SELECT email  FROM  user inner join item on item.UserID = user.UserID WHERE ItemID ='$id'";

                     //$result2= mysqli_query($conn, $query2);
                     // $row = mysqli_fetch_array($result2);
                      $sql="SELECT * FROM item INNER JOIN user ON item.UserID = user.UserID INNER JOIN category ON item.CategoryID = Category.CategoryID";
                      $result1= mysqli_query($conn, $sql) ;
                      $row =mysqli_fetch_assoc($result1);
                      //echo $row['email'];


                      if(mail($row['email'], 'Lost and found team', 'Sorry for inform you that your lost or found item is disapproved. ', 'From: lostandfound11yarmouk@gmail.com')){
                        
                        echo '<script>alert("Mail sent ");</script>';}
                        else{echo '<script>alert("Mail not sent ");</script>';}}



                      if (isset($_GET['approveid'])){
                        $id= $_GET['approveid'];
                        $query="UPDATE item SET approved =1 WHERE ItemID ='$id'";
                        $result= mysqli_query($conn, $query);
                        
                        $sql="SELECT * FROM item INNER JOIN user ON item.UserID = user.UserID INNER JOIN category ON item.CategoryID = Category.CategoryID";
                        $result1= mysqli_query($conn, $sql) ;
                        $row =mysqli_fetch_assoc($result1);

                        if(mail($row['email'], 'Lost and found team', 'We wnat to inform you that your lost or found item is approved. ', 'From: lostandfound11yarmouk@gmail.com')){
                        //$query2= "SELECT UserID FROM  item where ItemID ='$id'";
                        //$result2= mysqli_query($conn, $query2);
                        //$row = mysqli_fetch_array($result);
                        echo '<script>alert("Mail sent ");</script>';}
                        else{echo '<script>alert("Mail not sent ");</script>';}}


                      

                        //$query="INSERT INTO item VALUES ('$id', )";


?> 

    <!-- Main content -->
    <section class="content">
      <div class="container-fluid">
        <div class="row">


          <div class="col-12">
            <div class="card">



                 
<?php

 $host = 'localhost';// Username for database
 $username  = 'root';// username come with xampp
 $password = '';
 $database = 'lostfounddb'; // database you made 

 //create connection:
 $conn = mysqli_connect($host,$username,$password,$database);
 if (isset($_GET['search']))
 {
   $text= $_GET['search'];
    $query= "SELECT * FROM item  INNER JOIN user ON item.UserID = user.UserID  INNER JOIN category ON item.CategoryID = Category.CategoryID WHERE CONCAT(ItemName,Description,Date,email,CategoryName) LIKE '%$text%' AND approved=0";
    $result= mysqli_query($conn, $query) ;

 }
 else{
  $query=" SELECT * FROM item INNER JOIN user ON item.UserID = user.UserID INNER JOIN category ON item.CategoryID = Category.CategoryID AND approved=0";
                   
                    
  $result= mysqli_query($conn, $query);

 }

 ?>




            <div class="card-header">
              <form action="" method="GET">
             
                
                  <div class="col-md-12">
               

              <div class="input-group mb-1">
                <h3 class="card-title"> Request Data table</h3> 
                 <div class="col-sm-12 col-md-5"></div>
              <input type="text" name ="search" value="<?php if(isset($_GET['search'])){echo $_GET['search']; } ?>" class="form-control" placeholder="Search by item name or category name or desciption..">
                 <button type="submit" class="btn btn-info btn-xs" style="font-size:17px;">Search</button>
              </div>
              </div>

              </form>
              
            </div>
            <br>




              

               <table id="example1" class="table table-bordered table-striped">
                  <thead>
                  <tr>
                    <th>UserID</th>
                    <th>Item name</th>
                    <th>Report type</th>
                    <th>Description</th>
                    <th>Date</th>
                    <th>Email</th>
                    <th>Image</th>
                    <th>Category name</th>
                     
                    <th width="10%"> </th>
                  </tr>
                  </thead>

                  





<?php 
                   if(mysqli_num_rows($result)>0){  
                    while ($row =mysqli_fetch_assoc($result)):
                     
                         ?>               
 

                  <tbody>
                  <tr>
                    <td><?php echo $row['UserID']; ?>  </td>

                   
                    <td><?php echo $row['ItemName']; ?> </td>
                    <td><?php echo $row['ReportType']; ?> </td>
                  
                    <td><?php echo $row['Description']; ?> </td>
                    <td><?php echo $row['Date']; ?> </td>
                    <td><?php echo $row['email']; ?></td>

                    <td><img src="<?php echo $row['image'];?>" width="100" hieght ="100"></td>

                    <td><?php echo $row['CategoryName']; ?></td>
                    
                    
                    <td>
                      <a style="font-size:24px;color:blue"href="Request.php?approveid=<?php echo $row['ItemID'];?>"> <i class="fa fa-thumbs-up"></i> &ensp;</a>

                 

                      <a style="font-size:24px;color:red" href="Request.php?deleteid=<?php echo $row['ItemID'];?>" >
                       <i class="fa fa-thumbs-down"></i></a></td>
                    
                  </tr>
                  

                  </tbody>
<?php
              endwhile; }else{ ?>     
                     
                  <tr>
                    <td colspan="9" style="text-align: center; vertical-align: middle;" >No matching records found</td>

                  </tr>

<?php }?>
                </table>
                     
                        
                          
                          <!-- /.modal-content -->
          
                        <!-- /.modal-dialog -->
        </div>
      </div>
              <!-- /.card-body -->
  </div>
  </div>
            <!-- /.card -->
          </div>
          <!-- /.col -->
        
        <!-- /.row -->
      
      <!-- /.container-fluid -->
    </section>
    <!-- /.content -->
  


  <!-- /.content-wrapper -->
  <footer class="main-footer">
   <p class="u-text u-text-default u-text-1"> © Copyright&nbsp;2022.Lost and found team. &nbsp; &nbsp; Yarmouk university 
        </p>
        <p class="u-text u-text-default u-text-2"> </p>
    
  </footer>

  <!-- Control Sidebar -->
  <aside class="control-sidebar control-sidebar-dark">
    <!-- Control sidebar content goes here -->
  </aside>
  <!-- /.control-sidebar -->
</div>
<!-- ./wrapper -->

<!-- jQuery -->

<script src="plugins/jquery/jquery.min.js"></script>
<!-- Bootstrap 4 -->
<script src="plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
<!-- DataTables  & Plugins -->
<!--<script src="plugins/datatables/jquery.dataTables.min.js"></script>-->
<script src="plugins/datatables-bs4/js/dataTables.bootstrap4.min.js"></script>
<script src="plugins/datatables-responsive/js/dataTables.responsive.min.js"></script>
<script src="plugins/datatables-responsive/js/responsive.bootstrap4.min.js"></script>
<script src="plugins/datatables-buttons/js/dataTables.buttons.min.js"></script>
<script src="plugins/datatables-buttons/js/buttons.bootstrap4.min.js"></script>
<script src="plugins/jszip/jszip.min.js"></script>
<script src="plugins/pdfmake/pdfmake.min.js"></script>
<script src="plugins/pdfmake/vfs_fonts.js"></script>
<script src="plugins/datatables-buttons/js/buttons.html5.min.js"></script>
<script src="plugins/datatables-buttons/js/buttons.print.min.js"></script>
<script src="plugins/datatables-buttons/js/buttons.colVis.min.js"></script>
<!-- AdminLTE App -->
<script src="dist/js/adminlte.min.js"></script>
<!-- AdminLTE for demo purposes -->
<script src="dist/js/demo.js"></script>
<!-- Page specific script -->
<script>
  $(function () {
    $("#example1").DataTable({
      "responsive": true, "lengthChange": false, "autoWidth": false,
      "buttons": [""]
    }).buttons().container().appendTo('#example1_wrapper .col-md-6:eq(0)');
    $('#example2').DataTable({
      "paging": true,
      "lengthChange": false,
      "searching": false,
      "ordering": true,
      "info": true,
      "autoWidth": false,
      "responsive": true,
    });
  });
</script>
</body>
</html>
